<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Gallery • Kenari Tower Hotel</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">

  <style>
    body{margin:0;padding:24px;font-family:Inter;background:#020617;color:#e5e7eb}
    .shell{max-width:1100px;margin:auto}
    .topbar{display:flex;justify-content:space-between;padding:16px 18px;
      background:#0f172a;border-radius:20px}
    .card{margin-top:18px;padding:18px;border-radius:20px;background:#0f172a}
    .item{margin-top:14px;padding:16px;border-radius:18px;background:#020617}
    .grid{display:grid;grid-template-columns:110px 1fr;gap:14px}
    .thumb{width:110px;height:78px;border-radius:14px;overflow:hidden;border:1px solid #1e293b}
    .thumb img{width:100%;height:100%;object-fit:cover}
    label{font-size:12px;margin-top:8px;display:block}
    input,textarea{width:100%;padding:10px;border-radius:12px;
      border:1px solid #1e293b;background:#020617;color:#e5e7eb}
    textarea{min-height:80px}
    .mini{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    .save{margin-top:16px;display:flex;justify-content:space-between}
    button{padding:12px 16px;border-radius:14px;border:none;
      background:#4f46e5;color:white;font-weight:600}

      /* ✅ SAME TOPBAR STYLE AS DASHBOARD */
.topbar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 16px;
  padding: 16px 18px;
  border-radius: 20px;
  background: rgba(15, 23, 42, 0.70);
  backdrop-filter: blur(12px);
  border: 1px solid rgba(255,255,255,0.08);
  box-shadow:
    0 18px 40px rgba(0,0,0,.35),
    inset 0 1px 0 rgba(255,255,255,.03);
}

.brand h1 {
  margin: 0;
  font-size: 16px;
  font-weight: 600;
  letter-spacing: .3px;
}
.brand p {
  margin: 4px 0 0;
  font-size: 12px;
  color: #9ca3af;
}

.userbox {
  display: flex;
  align-items: center;
  gap: 12px;
  flex-wrap: wrap;
  justify-content: flex-end;
}

.pill {
  padding: 8px 10px;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,.10);
  background: rgba(2, 6, 23, .55);
  font-size: 12px;
  color: #cbd5f5;
  white-space: nowrap;
}

.btnGhost {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 10px 12px;
  border-radius: 14px;
  background: rgba(255,255,255,.06);
  border: 1px solid rgba(255,255,255,.10);
  color: #e5e7eb;
  font-weight: 600;
  font-size: 12px;
  text-decoration: none;
  transition: all .2s ease;
  cursor: pointer;
}
.btnGhost:hover { transform: translateY(-1px); }

.logoutBtn {
  border: none;
  cursor: pointer;
  padding: 10px 12px;
  border-radius: 14px;
  background: rgba(239, 68, 68, .10);
  border: 1px solid rgba(239, 68, 68, .25);
  color: #fecaca;
  font-weight: 600;
  font-size: 12px;
  transition: all .2s ease;
}
.logoutBtn:hover {
  transform: translateY(-1px);
  background: rgba(239, 68, 68, .14);
  border-color: rgba(239, 68, 68, .35);
}

  </style>
</head>

<body>
<div class="shell">
  <div class="topbar">
  <div class="brand">
    <h1>Kenari Tower Hotel</h1>
    <p>Gallery • CMS</p>
  </div>

  <div class="userbox">
    <div class="pill"><%= user?.email || "unknown" %></div>
    <div class="pill">Role: <%= user?.role || "-" %></div>

    <a class="btnGhost" href="/admin">← Dashboard</a>

    <form method="POST" action="/auth/logout" style="margin:0;">
      <button class="logoutBtn" type="submit">Logout</button>
    </form>
  </div>
</div>


  <form method="POST" action="/admin/gallery" enctype="multipart/form-data">
    <div class="card">

      <% (items || []).forEach((it, i) => { %>
        <div class="item">
          <input type="hidden" name="items[<%=i%>][id]" value="<%= it.id %>">

          <div class="grid">
            <div class="thumb">
              <% if (it.image_path) { %>
                <img src="<%= it.image_path %>">
              <% } else { %>No Image<% } %>
            </div>

            <div>
              <label>Upload Image</label>
              <input type="file" name="image_<%= it.id %>" accept="image/*">

              <label>Overlay Label</label>
              <input name="items[<%=i%>][overlay_label]" value="<%= it.overlay_label || '' %>">

              <label>Title</label>
              <input name="items[<%=i%>][title]" value="<%= it.title || '' %>">

              <label>Description</label>
              <textarea name="items[<%=i%>][description]"><%= it.description || '' %></textarea>

              <div class="mini">
                <div>
                  <label>Sort Order</label>
                  <input name="items[<%=i%>][sort_order]" value="<%= it.sort_order %>">
                </div>
                <div>
                  <label>Active (1/0)</label>
                  <input name="items[<%=i%>][is_active]" value="<%= it.is_active %>">
                </div>
              </div>
            </div>
          </div>
        </div>
      <% }) %>

      <div class="save">
        <span style="font-size:12px;color:#94a3b8">Upload hanya mengubah item yang dipilih</span>
        <button type="submit">Save Gallery</button>
      </div>

      <% if (saved) { %>
        <p style="color:#22c55e">✔ Gallery updated</p>
      <% } %>
      <% if (error) { %>
        <p style="color:#f87171"><%= error %></p>
      <% } %>

    </div>
  </form>
</div>
</body>
</html>
